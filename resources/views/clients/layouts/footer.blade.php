 <!-- Footer Start -->
 <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5">
     <div class="container py-0">
         <div class="pb-4 mb-4 footer-divider">
             <div class="row g-4">
                 <div class="col-lg-3">
                     <a href="#">
                         <h1 class="text-primary mb-0">MOMOFOOD</h1>
                         <p class="text-secondary mb-0">Thiên đường đồ ăn vặt</p>
                     </a>
                 </div>
                 <div class="col-lg-6">
                     <div class="position-relative mx-auto">
                         <input class="form-control border-0 w-100 py-3 px-4 rounded-pill" type="number"
                             placeholder="Email của bạn">
                         <button type="submit"
                             class="btn border-0 border-secondary py-3 px-4 position-absolute rounded-pill text-white"
                             style="top: 0; right: 0; background-color: #db735b;">Đăng ký ngay</button>

                     </div>
                 </div>
                 <div class="col-lg-3">
                     <div class="d-flex justify-content-end pt-3">
                         <a class="btn  btn-outline-secondary me-2 btn-md-square rounded-circle" href=""><i
                                 class="fab fa-twitter"></i></a>
                         <a class="btn btn-outline-secondary me-2 btn-md-square rounded-circle" href=""><i
                                 class="fab fa-facebook-f"></i></a>
                         <a class="btn btn-outline-secondary me-2 btn-md-square rounded-circle" href=""><i
                                 class="fab fa-youtube"></i></a>
                         <a class="btn btn-outline-secondary btn-md-square rounded-circle" href=""><i
                                 class="fab fa-linkedin-in"></i></a>
                     </div>
                 </div>
             </div>
         </div>
         <div class="row g-5">
             <div class="col-lg-3 col-md-6">
                 <div class="footer-item">
                     <h4 class="text-light mb-3">Tại sao mọi người thích chúng tôi!</h4>
                     <p class="mb-4">Giao hàng mọi nơi trong thời gian nhanh nhất, nhận hàng nhanh chóng. Hình ảnh
                         chụp thật 100%, đảm bảo sản phẩm đúng như hình đăng tải. Liên hệ tư vấn nhanh chóng khi khách
                         hàng đặt sản phẩm.</p>
                     <a href="" class="btn border-secondary py-2 px-4 rounded-pill text-primary">Đọc thêm</a>
                 </div>
             </div>
             <div class="col-lg-3 col-md-6">
                 <div class="d-flex flex-column text-start footer-item">
                     <h4 class="text-light mb-3">Thông tin cửa hàng</h4>
                     <a class="btn-link" href="">Giới thiệu về chúng tôi</a>
                     <a class="btn-link" href="">Chính sách bảo mật</a>
                     <a class="btn-link" href="">Liên hệ với chúng tôi</a>
                     <a class="btn-link" href="">Điều khoản và điều kiện</a>
                     <a class="btn-link" href="">Chính sách trả hàng</a>
                     <a class="btn-link" href="">Câu hỏi thường gặp</a>
                 </div>
             </div>
             <div class="col-lg-3 col-md-6">
                 <div class="d-flex flex-column text-start footer-item">
                     <h4 class="text-light mb-3">Tài khoản</h4>
                     <a class="btn-link" href="">Tài khoản của tôi</a>
                     <a class="btn-link" href="">Danh sách mong muốn</a>
                     <a class="btn-link" href="">Thông tin cửa hàng</a>
                     <a class="btn-link" href="">Lịch sử đơn hàng</a>
                 </div>
             </div>
             <div class="col-lg-3 col-md-6">
                 <div class="footer-item">
                     <h4 class="text-light mb-3">THÔNG TIN LIÊN HỆ</h4>
                     <p>Địa chỉ: Số 8 Đường Trịnh Văn Bô</p>
                     <p>Email: momofood@gmail.com</p>
                     <p>Điện thoại:0974538917</p>
                     <p>Giờ làm việc: 8:00 - 22:00</p>
                     <div class="mt-3">
                         <iframe
                             src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3723.676670056904!2d105.7497170759538!3d21.04674558061202!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3134533d410759c3%3A0x80dc5ad2f41d2796!2zOCDEkC4gVHLhu4tuaCBWxINuIELhu5MsIMSQ4buTbmggQ-G7lSBQaOG6p24sIEjDoCBO4buZaSwgSMOgIE7hu5lpLCBIw6AgTuG7mWk!5e0!3m2!1svi!2s!4v1718199315015!5m2!1svi!2s"
                             width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"
                             referrerpolicy="no-referrer-when-downgrade">
                         </iframe>
                     </div>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <div class="container-fluid copyright bg-dark py-4">
     <div class="container">
         <div class="row">
             <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                 <span class="text-light">
                     <i class="fas fa-copyright text-light me-2"></i>
                     Cửa hàng <span class="fw-bold text-warning">MoMo Food</span> – Thế Giới Đồ Ăn Vặt, rất vui được
                     phục vụ quý khách!
                 </span>
             </div>
         </div>
     </div>
 </div>

 <!-- Copyright End -->
    

 {{-- <script lang="javascript">
     var __vnp = {
         code: 25622,
         key: '',
         secret: '32ecf215a95c0d026f98f218b41d1326'
     };
     (function() {
         var ga = document.createElement('script');
         ga.type = 'text/javascript';
         ga.async = true;
         ga.defer = true;
         ga.src = '//core.vchat.vn/code/tracking.js?v=60659';
         var s = document.getElementsByTagName('script');
         s[0].parentNode.insertBefore(ga, s[0]);
     })();
 </script> --}}
 <!-- Back to Top -->
 <a href="#" class="btn border-3 border-0 rounded-circle back-to-top text-white"
     style="background-color: #db735b;"><i class="fa fa-arrow-up"></i></a>


 <!-- JavaScript Libraries -->

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
 <script src="{{ asset('clients/lib/easing/easing.min.js') }}"></script>
 <script src="{{ asset('clients/lib/waypoints/waypoints.min.js') }}"></script>
 <script src="{{ asset('clients/lib/lightbox/js/lightbox.min.js') }}"></script>
 <script src="{{ asset('clients/lib/owlcarousel/owl.carousel.min.js') }}"></script>

 <!-- Template Javascript -->
 <script src="{{ asset('clients/js/main.js') }}"></script>

 </body>

 <style>
     .footer-divider::after {
         content: "";
         position: absolute;
         bottom: 0;
         left: 0;
         height: 4px;
         /* Tăng độ dày cho rõ */
         width: 100%;
         background: linear-gradient(to right, #db735b, #d56a58);
         border-radius: 2px;
         z-index: 1;
     }

     .footer-divider {
         position: relative;
         padding-bottom: 1.5rem;
         /* Thêm khoảng cách để nhìn rõ vạch */
         margin-bottom: 2rem;
     }
 </style>

 

<!-- Floating Chat Button -->
<div class="floating-chat-button" id="chatToggle">
    <div class="chat-icon-wrapper">
        <i class="fas fa-comments"></i>
        <span class="notification-badge" id="unreadCount" style="display: none;">0</span>
    </div>
    <div class="chat-tooltip">Cần hỗ trợ?</div>
</div>

<style>
    .floating-chat-button {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #FFE5B4 0%, #F08080 100%);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
        z-index: 9999;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        display: flex;
        align-items: center;
        justify-content: center;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    .floating-chat-button:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
    }

    .floating-chat-button:active {
        transform: scale(0.95);
    }

    .chat-icon-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .floating-chat-button i {
        font-size: 26px;
        color: #ffffff;
        transition: all 0.3s ease;
    }

    .floating-chat-button:hover i {
        transform: rotate(10deg);
    }

    .notification-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #ef4444;
        color: #ffffff;
        border-radius: 10px;
        padding: 2px 6px;
        font-size: 11px;
        font-weight: 600;
        min-width: 18px;
        text-align: center;
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
        animation: pulse-badge 2s infinite;
        border: 2px solid #ffffff;
    }

    @keyframes pulse-badge {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
    }

    /* Tooltip */
    .chat-tooltip {
        position: absolute;
        bottom: 70px;
        right: 0;
        background: #1f2937;
        color: #ffffff;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 13px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .chat-tooltip::after {
        content: '';
        position: absolute;
        top: 100%;
        right: 20px;
        border-width: 5px;
        border-style: solid;
        border-color: #1f2937 transparent transparent transparent;
    }

    .floating-chat-button:hover .chat-tooltip {
        opacity: 1;
        bottom: 80px;
    }

    .floating-chat-button.chat-open {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        transform: rotate(90deg);
    }

    .floating-chat-button.chat-open i::before {
        content: "\f00d"; 
    }

    .floating-chat-button::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #FFE5B4 0%, #F08080 100%);
        border-radius: 50%;
        z-index: -1;
        animation: pulse-ring 2s infinite;
    }

    @keyframes pulse-ring {
        0% {
            transform: scale(1);
            opacity: 1;
        }
        100% {
            transform: scale(1.5);
            opacity: 0;
        }
    }

    @media (max-width: 768px) {
        .floating-chat-button {
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
        }
        
        .floating-chat-button i {
            font-size: 24px;
        }
    }

    .messenger-style {
        background: linear-gradient(135deg, #0084ff 0%, #0066cc 100%);
    }

    .whatsapp-style {
        background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
    }

    .modern-gradient {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .chat-sidebar.open ~ .floating-chat-button {
        opacity: 0;
        pointer-events: none;
        transform: scale(0);
    }

    .chat-sidebar {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 380px;
        height: 550px;
        background: #ffffff;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        z-index: 10000;
        transform: translateY(110%) scale(0.8);
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        opacity: 0;
        transform-origin: bottom right;
        border: 1px solid rgba(0, 0, 0, 0.08);
    }

    .chat-sidebar.open {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const adminId = 5;
        const userId = "{{ auth()->id() }}";
        const userAvatar = "{{ auth()->user() && auth()->user()->avatar ? Storage::url(auth()->user()->avatar) : '/admins/assets/img/avt_admin.png' }}";
        const adminAvatar = "{{ asset('/admins/assets/img/avt_admin.png') }}";
        
        const chatToggle = document.getElementById('chatToggle');
        const chatSidebar = document.getElementById('chatSidebar');
        
        chatToggle.addEventListener('click', () => {
            const isOpen = chatSidebar.classList.contains('open');
            
            if (isOpen) {
                chatSidebar.classList.remove('open');
                chatToggle.classList.remove('chat-open');
            } else {
                chatSidebar.classList.add('open');
                chatToggle.classList.add('chat-open');
                loadMessages();
                document.getElementById('unreadCount').style.display = 'none';
                document.getElementById('unreadCount').textContent = '0';
            }
        });

        document.getElementById('closeChat').addEventListener('click', () => {
            chatSidebar.classList.remove('open');
            chatToggle.classList.remove('chat-open');
        });

        document.getElementById('chatMessageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('sendMessage').click();
            }
        });

        document.getElementById('sendMessage').addEventListener('click', () => {
            let msg = document.getElementById('chatMessageInput').value;
            if (!msg.trim()) return;

            fetch('/clients/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').content
                    },
                    body: JSON.stringify({
                        to_id: adminId,
                        message: msg
                    })
                })
                .then(res => res.json())
                .then(data => {
                    let chatBox = document.getElementById('chatMessages');
                    chatBox.innerHTML +=
                        `<div class="message-container me">
                            <div class="message"> ${data.message.message}</div>
                            <img src="${userAvatar}" class="avatar">
                        </div>`;
                    chatBox.scrollTop = chatBox.scrollHeight;

                    document.getElementById('chatMessageInput').value = '';
                });
        });

        function loadMessages() {
            fetch(`/clients/messages/${adminId}`)
                .then(res => res.json())
                .then(data => {
                    let html = '';
                    data.forEach(msg => {
                        if (msg.from_id == userId) {
                            html += `<div class="message-container me">
                                        <div class="message">${msg.message}</div>
                                        <img src="${userAvatar}" class="avatar">
                                     </div>`;
                        } else {
                            html += `<div class="message-container other">
                                        <img src="${adminAvatar}" class="avatar">
                                        <div class="message">${msg.message}</div>
                                     </div>`;
                        }
                    });
                    let chatBox = document.getElementById('chatMessages');
                    chatBox.innerHTML = html;
                    chatBox.scrollTop = chatBox.scrollHeight;
                });
        }

        let unreadCount = 0;
        
        window.Echo.private(`chat.${userId}`)
            .listen('MessageSent', (e) => {
                let chatBox = document.getElementById('chatMessages');
                const isChatOpen = chatSidebar.classList.contains('open');

                if (e.message.to_id == userId) {
                    chatBox.innerHTML += `<div class="message-container me">
                                            <div class="message">Bạn: ${e.message}</div>
                                            <img src="${userAvatar}" class="avatar">
                                         </div>`;
                } else {
                    chatBox.innerHTML += `<div class="message-container other">
                                            <img src="${adminAvatar}" class="avatar">
                                            <div class="message"> ${e.message}</div>
                                         </div>`;

                    if (!isChatOpen) {
                        unreadCount++;
                        const badge = document.getElementById('unreadCount');
                        badge.textContent = unreadCount;
                        badge.style.display = 'block';
                    }

                    Toastify({
                        text: "Bạn có tin nhắn mới từ quản trị viên",
                        duration: 3000,
                        gravity: "top",
                        position: "right",
                        backgroundColor: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                        stopOnFocus: true
                    }).showToast();
                }
                chatBox.scrollTop = chatBox.scrollHeight;
            });
    });
</script>
